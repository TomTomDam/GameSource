@model GameSource.ViewModels.GameSourceUser.AccountViewModel.AccountSettingsViewModel
@using Microsoft.AspNetCore.Identity;
@using GameSource.Models.GameSourceUser;
@inject SignInManager<User> signInManager;
@inject RoleManager<UserRole> roleManager;

@{
    ViewData["Title"] = "Account settings";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="account-settings-page">
    <div class="page-heading text-dark text-bold"><span class="page-heading-username">@User.Identity.Name</span> > Account Settings</div>
    <div class="page-content container clearfix">
        <div class="col-md-3 float-left pr-4">
            <nav class="menu position-relative" aria-label="Account Settings">
                <a href="javascript:void(0)" data-url="'@Url.Action("AccountSettingsPartial", "Account")'" class="menu-item active" id="account-settings-btn">
                    Account
                </a>
                <a href="javascript:void(0)" data-url="'@Url.Action("EmailSettingsPartial", "Account")'" class="menu-item" id="email-settings-btn">
                    Email
                </a>
                <a href="javascript:void(0)" data-url="'@Url.Action("PrivacySettingsPartial", "Account")'" class="menu-item" id="privacy-settings-btn">
                    Privacy
                </a>
            </nav>
        </div>

        <div id="account-settings"></div>
        <div id="email-settings"></div>
        <div id="privacy-settings"></div>

        @*<div id="account-settings-page-content">
            <account-settings></account-settings>
        </div>*@
    </div>
</div>

@section scripts {
    <script src="~/vue/js/app.js"></script>
    <script>
        new Vue({
        }).$mount('#account-settings-page-content')
    </script>

    <script>
        $(document).ready(function () {
            accountSettings();
            $('#account-settings').show();
            $('#email-settings').hide();
            $('#privacy-settings').hide();

            $('#account-settings-btn').on('click', function (e) {
                accountSettings();
            });

            function accountSettings() {
                $('#email-settings').hide();
                $('#privacy-settings').hide();

                $.ajax({
                    url: '/account/account-settings',
                    type: 'GET',
                    success: function (result) {
                        $('#account-settings').html(result);
                        $('#account-settings').show();
                    },
                    error: function (xhr) {
                        console.log("Error: " + xhr.statusText);
                    }
                });
            }

            $('#email-settings-btn').on('click', function (e) {
                emailSettings();
            });

            function emailSettings() {
                $('#account-settings').hide();
                $('#privacy-settings').hide();

                $.ajax({
                    url: '/account/email-settings',
                    type: 'GET',
                    success: function (result) {
                        $('#email-settings').html(result);
                        $('#email-settings').show();
                    },
                    error: function (xhr) {
                        console.log("Error: " + xhr.statusText);
                    }
                });
            }

            $('#privacy-settings-btn').on('click', function (e) {
                privacySettings();
            });

            function privacySettings() {
                $('#email-settings').hide();
                $('#account-settings').hide();

                $.ajax({
                    url: '/account/privacy-settings',
                    type: 'GET',
                    success: function (result) {
                        $('#privacy-settings').html(result);
                        $('#privacy-settings').show();
                    },
                    error: function (xhr) {
                        console.log("Error: " + xhr.statusText);
                    }
                });
            }
        });
    </script>
}