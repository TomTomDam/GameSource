@model GameSource.ViewModels.GameSourceUser.AccountViewModel.AccountSettingsViewModel
@using Microsoft.AspNetCore.Identity;
@using GameSource.Models.GameSourceUser;
@inject SignInManager<User> signInManager;
@inject RoleManager<UserRole> roleManager;

@{
    ViewData["Title"] = "Account settings";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="settings-page">
    <div class="page-heading text-dark text-bold"><span class="page-heading-username">@User.Identity.Name</span> > Account Settings</div>
    <div class="page-content container clearfix">
        <div class="col-md-3 float-left pr-4">
            <nav class="menu position-relative" aria-label="Account Settings">
                <a href="#" class="menu-item active" onclick="accountSettings();">
                    Account
                </a>
                <a href="#" class="menu-item" onclick="emailSettings();">
                    Email
                </a>
                <a href="#" class="menu-item" onclick="privacySettings();">
                    Privacy
                </a>
            </nav>
        </div>

        <div id="account-settings"></div>
        <div id="email-settings"></div>
        <div id="privacy-settings"></div>
    </div>
</div>

@section scripts {
    <script>
        $('#account-settings').show();
        $('#email-settings').hide();
        $('#privacy-settings').hide();

        function accountSettings() {
            $('#email-settings').hide();
            $('#privacy-settings').hide();

            $.ajax({
                url: '/account/AccountSettingsPartial',
                type: 'GET',
                success: function (result) {
                    $('#account-settings').html(result);
                    $('#account-settings').show();
                },
                error: function (xhr, status, error) {
                    console.log("Error: " + xhr.statusText);
                }
            });
        }

        function emailSettings() {
            $('#account-settings').hide();
            $('#privacy-settings').hide();

            $('#email-settings').load('@Url.Action("EmailSettingsPartial", "Account")');
            $('#email-settings').show();
        }

        function privacySettings() {
            $('#email-settings').hide();
            $('#account-settings').hide();

            $('#privacy-settings').load('@Url.Action("PrivacySettingsPartial", "Account")');
            $('#privacy-settings').show();
        }
    </script>
}